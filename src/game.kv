#:import font_config frontend.screens.config.font_config

<WelcomeScreen>:
    BoxLayout:
        orientation: 'vertical'
        padding: [20, 20, 20, 20]
        spacing: 20
        
        # Header
        BoxLayout:
            size_hint_y: 0.2
            Label:
                text: "Willkommen zum Myjongg Calculator!"
                font_size: font_config.font_size_big
                halign: 'center'
                valign: 'middle'
                text_size: self.size

        # Instructions
        BoxLayout:
            size_hint_y: 0.15
            Label:
                text: "Bitte wählen Sie einen Ordner für die Spielaufzeichnung:"
                font_size: font_config.font_size_medium
                halign: 'center'
                valign: 'middle'
                text_size: self.size

        # Folder info
        BoxLayout:
            size_hint_y: 0.1
            Label:
                text: root.folder_info
                font_size: font_config.font_size_medium
                halign: 'center'
                valign: 'middle'
                text_size: self.size

        # Spacer
        Widget:
            size_hint_y: 0.2

        # Buttons
        BoxLayout:
            size_hint_y: 0.35
            orientation: 'vertical'
            spacing: 20
            
            Button:
                text: "Spielordner auswählen/erstellen"
                font_size: font_config.font_size_medium
                on_release: root.select_folder()
            
            Button:
                text: f"Verwende {root.get_default_folder_name()}"
                font_size: font_config.font_size_medium
                on_release: root.use_default_folder()
            
            Button:
                text: "Weiter zum Spiel"
                font_size: font_config.font_size_medium
                disabled: not root.can_proceed
                on_release: root.proceed_to_start_screen()

<StartScreen>:
    BoxLayout:
        orientation: 'vertical'
        padding: [20, 20, 20, 20]
        spacing: 20
        
        # Header
        BoxLayout:
            size_hint_y: 0.15
            Label:
                text: "Neues Spiel neues Glück!"
                font_size: font_config.font_size_big

        # Explanation Label
        Label:
            size_hint_y: 0.1
            text: "Namen der Spieler eingeben:"
            font_size: font_config.font_size_medium

        # Body
        BoxLayout:
            id: player_inputs_container
            orientation: 'vertical'
            size_hint_y: 0.60

        # Footer
        BoxLayout:
            size_hint_y: 0.15
            Button:
                text: "Spiel starten"
                font_size: font_config.font_size_medium
                on_release: root.start_game(self)

<ScoreboardScreen>:
    BoxLayout:
        orientation: 'vertical'
        padding: [20, 20, 20, 20]
        spacing: 20
        
        # Header
        BoxLayout:
            size_hint_y: 0.15
            Label:
                text: f"Punktestand Runde {root.current_round_number}"
                font_size: font_config.font_size_big

        # Body
        BoxLayout:
            orientation: 'vertical'
            size_hint_y: 0.70
            GridLayout:
                id: scoreboard
                cols: 3
                spacing: 0
                row_default_height: self.parent.height * 0.15

        # Footer
        BoxLayout:
            size_hint_y: 0.15
            Button:
                text: "Punkte eingeben"
                font_size: font_config.font_size_medium
                on_release: root.go_to_add_points(self)

<AddPointsScreen>:
    BoxLayout:
        orientation: 'vertical'
        padding: [20, 20, 20, 20]
        spacing: 20
        
        # Header
        BoxLayout:
            size_hint_y: 0.15
            orientation: 'vertical'
            Label:
                text: f"Eingabe für Runde {root.current_round_number}"
                font_size: font_config.font_size_big

        # Table Header
        GridLayout:
            size_hint_y: 0.1
            cols: 4
            Label:
                text: "Spieler"
                font_size: font_config.font_size_medium
            Label:
                text: "Punkte"
                font_size: font_config.font_size_medium
            Label:
                text: "# Verdopplungen"
                font_size: font_config.font_size_medium
            Label:
                text: "Gewinner"
                font_size: font_config.font_size_medium

        # Body
        BoxLayout:
            id: players_layout
            orientation: 'vertical'
            size_hint_y: 0.60

        # Footer
        BoxLayout:
            id: buttons_layout
            size_hint_y: 0.15
            orientation: 'horizontal'
            spacing: 10
            Button:
                text: "Punkte berechnen"
                font_size: font_config.font_size_medium
                on_release: root.submit_points()

<RoundSummaryScreen>:
    BoxLayout:
        orientation: 'vertical'
        padding: [20, 20, 20, 20]
        spacing: 20
        
        # Header
        BoxLayout:
            size_hint_y: 0.15
            Label:
                text: f"Punkteberechnung"
                font_size: font_config.font_size_big

        # Table Header
        GridLayout:
            size_hint_y: 0.1
            cols: 3
            Label:
                text: "Spieler"
                font_size: font_config.font_size_medium
            Label:
                text: "Rundenpunkte"
                font_size: font_config.font_size_medium
            Label:
                text: "Punkteänderung"
                font_size: font_config.font_size_medium

        # Body
        BoxLayout:
            id: summary_layout
            orientation: 'vertical'
            size_hint_y: 0.60

        # Footer
        BoxLayout:
            size_hint_y: 0.15
            Button:
                text: "Punkte anwenden"
                font_size: font_config.font_size_medium
                on_release: root.confirm_points()

<GameOverScreen>:
    BoxLayout:
        orientation: 'vertical'
        padding: [20, 20, 20, 20]
        spacing: 20
        
        # Header
        BoxLayout:
            size_hint_y: 0.15
            Label:
                text: root.winner_text
                font_size: font_config.font_size_big
                bold: True

        # Body
        BoxLayout:
            orientation: 'vertical'
            size_hint_y: 0.70
            GridLayout:
                id: scoreboard
                cols: 3
                spacing: 0
                row_default_height: self.parent.height * 0.15

        # Footer
        BoxLayout:
            size_hint_y: 0.15
            Button:
                text: "Spielauswertung"
                font_size: font_config.font_size_medium
                on_release: root.proceed_to_save_game()

<SaveGameScreen>:
    BoxLayout:
        orientation: 'vertical'
        padding: [20, 20, 20, 20]
        spacing: 20

        # Body
        BoxLayout:
            id: save_container
            orientation: 'vertical'
            size_hint_y: 0.8

        # Footer
        BoxLayout:
            size_hint_y: 0.2
            Button:
                id: save_button
                text: 'Spiel speichern'
                font_size: font_config.font_size_medium
                on_release: root.save_game()

<FinalScreen>:
    BoxLayout:
        orientation: 'vertical'
        padding: [20, 20, 20, 20]
        spacing: 20
        
        # Body
        BoxLayout:
            id: final_container
            orientation: 'vertical'
            size_hint_y: 0.75
        
        # Footer with action buttons
        BoxLayout:
            size_hint_y: 0.25
            orientation: 'horizontal'
            spacing: 20
            
            Button:
                text: "Öffne Spielordner"
                font_size: font_config.font_size_medium
                on_release: root.open_game_folder()
            
            Button:
                text: "Neues Spiel"
                font_size: font_config.font_size_medium
                on_release: root.start_new_game()
